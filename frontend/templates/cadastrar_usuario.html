{% extends 'base.html' %} 

{% load static %}
{% load crispy_forms_tags %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'register.css' %}" />
{% endblock extra_head %} 

{% block body_init %}
<div class="video_overlay" style="display: none">
    <video muted playsinline id="qr-video"></video>
</div>
{% endblock body_init %}

{% block page_title %}Realize seu cadastro{% endblock page_title %}

{% block content %}
<form method="post" novalidate>
    {% csrf_token %}
    {{ form|crispy }}
    <button type="submit" class="btn btn-success">Salvar</button>
</form>

<script type="module">
    // import QrScanner from "{% static 'qr-scanner.min.js' %}";
    // QrScanner.WORKER_PATH = "{% static 'qr-scanner-worker.min.js' %}";
    // const video = document.getElementById("qr-video");
    // const overlay = document.querySelector(".video_overlay");
    // const nome_field = document.querySelector('#id_nome');

    // function initScanner(){
    //     overlay.style.display = 'flex';
    //     const scanner = new QrScanner(video, result => {
    //         scanner.destroy();
    //         overlay.style.display = "none";
    //         qr_code_field.value = result;
    //         nome_field.focus();
    //         console.log(result);
    //     });
    //     scanner.start();
    // }
    // // initScanner();
    // const qr_code_field = document.querySelector('#id_qr_code');
    // qr_code_field.addEventListener('focus', initScanner);

</script>
{% endblock content %}
